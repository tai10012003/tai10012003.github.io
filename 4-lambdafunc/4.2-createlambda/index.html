<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.134.2">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Create Lambda Function :: AWS System Manager</title>

    
    <link href="/css/nucleus.css?1732952638" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1732952638" rel="stylesheet">
    <link href="/css/hybrid.css?1732952638" rel="stylesheet">
    <link href="/css/featherlight.min.css?1732952638" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1732952638" rel="stylesheet">
    <link href="/css/auto-complete.css?1732952638" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1732952638" rel="stylesheet">
    <link href="/css/theme.css?1732952638" rel="stylesheet">
    <link href="/css/hugo-theme.css?1732952638" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1732952638" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1732952638"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/4-lambdafunc/4.2-createlambda/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1732952638"></script>
<script type="text/javascript" src="/js/auto-complete.js?1732952638"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/tai10012003.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1732952638"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/1-introduce/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/1-introduce/">
           <b> 1. </b> Introduction
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/2-preparation/" title="Preparation Steps" class="dd-item 
        
        
        
        ">
      <a href="/2-preparation/">
           <b> 2. </b> Preparation Steps
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/3-createdynamodb/" title="Create Table DynamoDB" class="dd-item 
        
        
        
        ">
      <a href="/3-createdynamodb/">
           <b> 3. </b> Create Table DynamoDB
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/4-lambdafunc/" title="Lambda Function" class="dd-item 
        parent
        
        
        ">
      <a href="/4-lambdafunc/">
           <b> 4. </b> Lambda Function
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/4-lambdafunc/4.1-iamrole/" title="Create IAM Role for Lambda and DynamoDB" class="dd-item 
        
        
        
        ">
      <a href="/4-lambdafunc/4.1-iamrole/">
           <b> 4.1. </b> Create IAM Role for Lambda and DynamoDB
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/4-lambdafunc/4.2-createlambda/" title="Create Lambda Function" class="dd-item 
        
        active
        
        ">
      <a href="/4-lambdafunc/4.2-createlambda/">
           <b> 4.2. </b> Create Lambda Function
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/5-apigateway/" title="API Gateway" class="dd-item 
        
        
        
        ">
      <a href="/5-apigateway/">
           <b> 5. </b> API Gateway
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/5-apigateway/5.1-createapigateway/" title="Create API Gateway" class="dd-item 
        
        
        
        ">
      <a href="/5-apigateway/5.1-createapigateway/">
           <b> 5.1. </b> Create API Gateway
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/5-apigateway/5.2-deployapi/" title="Deploy API" class="dd-item 
        
        
        
        ">
      <a href="/5-apigateway/5.2-deployapi/">
           <b> 5.2. </b> Deploy API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/6-s3setup/" title="S3 Setup" class="dd-item 
        
        
        
        ">
      <a href="/6-s3setup/">
           <b> 6. </b> S3 Setup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/6-s3setup/6.1-essentialprojectfiles/" title="Essential project files" class="dd-item 
        
        
        
        ">
      <a href="/6-s3setup/6.1-essentialprojectfiles/">
           <b> 6.1. </b> Essential project files
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/6-s3setup/6.2-create-s3/" title="Create S3" class="dd-item 
        
        
        
        ">
      <a href="/6-s3setup/6.2-create-s3/">
           <b> 6.2. </b> Create S3
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/6-s3setup/6.3-load-data/" title="Load Data" class="dd-item 
        
        
        
        ">
      <a href="/6-s3setup/6.3-load-data/">
           <b> 6.3. </b> Load Data
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/7-testresults/" title="Test Results" class="dd-item 
        
        
        
        ">
      <a href="/7-testresults/">
           <b> 7. </b> Test Results
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/7-testresults/7.1-postman/" title="Using Postman" class="dd-item 
        
        
        
        ">
      <a href="/7-testresults/7.1-postman/">
           <b> 7.1. </b> Using Postman
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/7-testresults/7.2-webs3/" title="Using Website Hosted on S3" class="dd-item 
        
        
        
        ">
      <a href="/7-testresults/7.2-webs3/">
           <b> 7.2. </b> Using Website Hosted on S3
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/8-cleanup/" title="Clean Up Resources" class="dd-item 
        
        
        
        ">
      <a href="/8-cleanup/">
          <b>8. </b>Clean Up Resources
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="https://tai10012003.github.io/4-lambdafunc/4.2-createlambda/" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="https://tai10012003.github.io/vi/4-lambdafunc/4.2-createlambda/">Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>18-11-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i> <a href="https://www.linkedin.com/in/sutrinh/"  style="color:orange">Gia Hưng </a> <br>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Build a Basic Serverless Product Management Website with AWS Services</a> > <a href='/4-lambdafunc/'>Lambda Function</a> > Create Lambda Function
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Create Lambda Function
            </h1>
          

        



	<h4 id="create-lambda-function">Create Lambda Function</h4>
<p>In this step, we will create a Lambda Function that handles all the CRUD (Create, Read, Update, Delete) operations for the application. The Lambda Function will serve as the backend, processing requests received from the API Gateway and interacting with S3 to manage product data.</p>
<hr>
<ol>
<li>Search for <strong>Lambda</strong> in the search bar and click on <strong>Lambda</strong>.</li>
</ol>
<p><img alt="Lambda" src="/images/4.lambdafuc/4.2.createlambda/001-lambda.png"></p>
<ol start="2">
<li>In the AWS <strong>Lambda</strong> console, click on the <strong>Create a function</strong> button.</li>
</ol>
<p><img alt="Lambda" src="/images/4.lambdafuc/4.2.createlambda/002-lambda.png"></p>
<ol start="3">
<li>In the <strong>Create a function</strong>. Provide the following details:</li>
</ol>
<ul>
<li>
<p>Choose <strong>&ldquo;Author from scratch&rdquo;</strong>.</p>
</li>
<li>
<p><strong>Function name</strong>: Enter a name for your function (e.g. <code>ProductCRUDFunction</code>)</p>
</li>
<li>
<p><strong>Runtime</strong>: Select <strong>Python 3.12</strong></p>
</li>
<li>
<p><strong>Architecture</strong>: Select <strong>x86_64</strong>.</p>
</li>
<li>
<p><strong>Permissions</strong>: Under <strong>Execution role</strong> section, select <strong>Use an existing role</strong>, the system will display the <strong>Existing Role</strong> section, select the IAM Role name that you created earlier in <a href="/4-lambdafunc/4.1-iamrole/">section 4.1. Create IAM Role for Lambda and DynamoDB</a></p>
</li>
<li>
<p>Click <strong>Create function</strong> button to proceed.</p>
</li>
</ul>
<p><img alt="Lambda" src="/images/4.lambdafuc/4.2.createlambda/003-lambda.png"></p>
<p><img alt="Lambda" src="/images/4.lambdafuc/4.2.createlambda/004-lambda.png"></p>
<ol start="4">
<li>
<p>After creating the function, a confirmation message will appear at the top of the screen: the function was successfully created.</p>
</li>
<li>
<p>In the <strong>ProductCRUDFunction</strong> section created, scroll down to the <strong>Code source</strong> section.</p>
</li>
</ol>
<ul>
<li>
<p>In the source code box:</p>
<ul>
<li>
<p>Click to edit the code inline.</p>
</li>
<li>
<p>Replace the default <strong>lambda_function.py</strong> content with the following code:</p>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> boto3
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> decimal <span style="color:#f92672">import</span> Decimal
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dynamodb <span style="color:#f92672">=</span> boto3<span style="color:#f92672">.</span>resource(<span style="color:#e6db74">&#39;dynamodb&#39;</span>)
</span></span><span style="display:flex;"><span>table <span style="color:#f92672">=</span> dynamodb<span style="color:#f92672">.</span>Table(<span style="color:#e6db74">&#39;ProductsTable&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DecimalEncoder</span>(json<span style="color:#f92672">.</span>JSONEncoder):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">default</span>(self, obj):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> isinstance(obj, Decimal):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> float(obj)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> super(DecimalEncoder, self)<span style="color:#f92672">.</span>default(obj)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lambda_handler</span>(event, context):
</span></span><span style="display:flex;"><span>    path <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;path&#34;</span>)
</span></span><span style="display:flex;"><span>    http_method <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;httpMethod&#34;</span>)
</span></span><span style="display:flex;"><span>    body <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(event[<span style="color:#e6db74">&#34;body&#34;</span>]) <span style="color:#66d9ef">if</span> event<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;body&#34;</span>) <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>    query_params <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;queryStringParameters&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> path <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;/products&#34;</span> <span style="color:#f92672">and</span> http_method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;GET&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> get_all_products()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> path <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;/products&#34;</span> <span style="color:#f92672">and</span> http_method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;POST&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> add_product(body)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> path <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;/product&#34;</span> <span style="color:#f92672">and</span> http_method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;GET&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> get_product(query_params<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;id&#34;</span>) <span style="color:#66d9ef">if</span> query_params <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> path <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;/product&#34;</span> <span style="color:#f92672">and</span> http_method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;PUT&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> update_product(body)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> path <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;/product&#34;</span> <span style="color:#f92672">and</span> http_method <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;DELETE&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> delete_product(query_params<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;id&#34;</span>) <span style="color:#66d9ef">if</span> query_params <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">404</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Endpoint not found&#34;</span>})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_all_products</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        response <span style="color:#f92672">=</span> table<span style="color:#f92672">.</span>scan()
</span></span><span style="display:flex;"><span>        products <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;Items&#34;</span>, [])
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> product <span style="color:#f92672">in</span> products:
</span></span><span style="display:flex;"><span>            product[<span style="color:#e6db74">&#34;price&#34;</span>] <span style="color:#f92672">=</span> float(product[<span style="color:#e6db74">&#34;price&#34;</span>])
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">200</span>, {<span style="color:#e6db74">&#34;products&#34;</span>: products})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">500</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: str(e)})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_product</span>(product):
</span></span><span style="display:flex;"><span>    required_fields <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;id&#34;</span>, <span style="color:#e6db74">&#34;name&#34;</span>, <span style="color:#e6db74">&#34;price&#34;</span>}
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> product <span style="color:#f92672">or</span> <span style="color:#f92672">not</span> required_fields<span style="color:#f92672">.</span>issubset(product):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">400</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Missing required fields&#34;</span>})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        product[<span style="color:#e6db74">&#34;price&#34;</span>] <span style="color:#f92672">=</span> Decimal(str(product[<span style="color:#e6db74">&#34;price&#34;</span>]))
</span></span><span style="display:flex;"><span>        table<span style="color:#f92672">.</span>put_item(Item<span style="color:#f92672">=</span>product)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">201</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Product added successfully !&#34;</span>, <span style="color:#e6db74">&#34;product&#34;</span>: product})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">500</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: str(e)})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_product</span>(product_id):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> product_id:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">400</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Product ID is required&#34;</span>})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        response <span style="color:#f92672">=</span> table<span style="color:#f92672">.</span>get_item(Key<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;id&#34;</span>: product_id})
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#34;Item&#34;</span> <span style="color:#f92672">in</span> response:
</span></span><span style="display:flex;"><span>            product <span style="color:#f92672">=</span> response[<span style="color:#e6db74">&#34;Item&#34;</span>]
</span></span><span style="display:flex;"><span>            product[<span style="color:#e6db74">&#34;price&#34;</span>] <span style="color:#f92672">=</span> float(product[<span style="color:#e6db74">&#34;price&#34;</span>])
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">200</span>, {<span style="color:#e6db74">&#34;product&#34;</span>: product})
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">404</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Product not found&#34;</span>})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">500</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: str(e)})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">update_product</span>(updated_product):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> updated_product <span style="color:#f92672">or</span> <span style="color:#e6db74">&#34;id&#34;</span> <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> updated_product:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">400</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Product ID is required&#34;</span>})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        table<span style="color:#f92672">.</span>update_item(
</span></span><span style="display:flex;"><span>            Key<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;id&#34;</span>: updated_product[<span style="color:#e6db74">&#34;id&#34;</span>]},
</span></span><span style="display:flex;"><span>            UpdateExpression<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;SET #n = :name, price = :price&#34;</span>,
</span></span><span style="display:flex;"><span>            ExpressionAttributeNames<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;#n&#34;</span>: <span style="color:#e6db74">&#34;name&#34;</span>},
</span></span><span style="display:flex;"><span>            ExpressionAttributeValues<span style="color:#f92672">=</span>{
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;:name&#34;</span>: updated_product[<span style="color:#e6db74">&#34;name&#34;</span>],
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;:price&#34;</span>: Decimal(str(updated_product[<span style="color:#e6db74">&#34;price&#34;</span>])),
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">200</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Product updated successfully !&#34;</span>})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">500</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: str(e)})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">delete_product</span>(product_id):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> product_id:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">400</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Product ID is required&#34;</span>})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        table<span style="color:#f92672">.</span>delete_item(Key<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;id&#34;</span>: product_id})
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">200</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Product deleted successfully !&#34;</span>})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> build_response(<span style="color:#ae81ff">500</span>, {<span style="color:#e6db74">&#34;message&#34;</span>: str(e)})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">build_response</span>(status_code, body):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;statusCode&#34;</span>: status_code,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;headers&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Content-Type&#34;</span>: <span style="color:#e6db74">&#34;application/json&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Access-Control-Allow-Origin&#34;</span>: <span style="color:#e6db74">&#34;*&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;Access-Control-Allow-Methods&#34;</span>: <span style="color:#e6db74">&#34;GET, POST, PUT, DELETE, OPTIONS&#34;</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;body&#34;</span>: json<span style="color:#f92672">.</span>dumps(body, cls<span style="color:#f92672">=</span>DecimalEncoder),
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><ul>
<li>Click <strong>Deploy (Ctrl+Shift+U)</strong> to save the function.</li>
</ul>
<ol start="6">
<li>After saving, the system will display the message: Successfully updated the function <strong>ProductCRUDFunction</strong>.</li>
</ol>
<p><img alt="Lambda" src="/images/4.lambdafuc/4.2.createlambda/005-lambda.png"></p>
<ol start="7">
<li>We have completed creating <strong>Lambda Function</strong>.</li>
</ol>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/4-lambdafunc/4.1-iamrole/" title="Create IAM Role for Lambda and DynamoDB"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/5-apigateway/" title="API Gateway" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1732952639"></script>
    <script src="/js/perfect-scrollbar.min.js?1732952639"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1732952639"></script>
    <script src="/js/jquery.sticky.js?1732952639"></script>
    <script src="/js/featherlight.min.js?1732952639"></script>
    <script src="/js/highlight.pack.js?1732952639"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1732952639"></script>
    <script src="/js/learn.js?1732952639"></script>
    <script src="/js/hugo-learn.js?1732952639"></script>

    <link href="/mermaid/mermaid.css?1732952639" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1732952639"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
